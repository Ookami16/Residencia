<style type="text/css">
	.button { text-align: left; }
</style>

<div class="row">
	<div class="col-md-6">
		<div class="container">
	<h3 id="title-align"><b>Notificaciones</b></h3>  
		<% numero  = 1 %>
		<% @actividades = Actividad.all.order(:fechaTermino) %>
		<% @actividades.each do |actividad| %>
			<% @evi = actividad.cat_tipo_actividad.cat_evidencias.map(&:id) %>
			<% bandera = false %>
			<% contador = 1 %>
			<% actual = Date.today %>
			<% if @evi != [] %>												
				<% if actividad.tipoEvidencia == "Individual" %>
					<% @ad = ActividadDocente.where(actividad_id: actividad.id) %>	
					<% @arreglo = [] %>
					<% texto = actividad.cat_tipo_actividad.nombreTipoAct%> 
					<% texto = texto +" "+ actividad.nombreActividad %>
					<% @arreglo.push(texto) %>
					<% @ad.each do |ad| %>
						<% @arreglo.push(Docente.find(ad.docente_id).nombreD) %>
						<% @evi.each do |evi| %>
							<% if ActIndividualDocente.find_by(actividad_docente_id: ad.id, cat_evidencia_id: evi) == nil %>
							   <% @arreglo.push(CatEvidencia.find(evi).nombreEvidencia) %>
							<% end %>
						<% end %>						
						<% if @arreglo.size()> 2 %>						
							<div class="row">
							   <div class="col-md-6">	
								   <% @arreglo.each do |elemento| %>
										<% if bandera == false %>
											<% if actual - actividad.fechaTermino > 30 %>
											   <button class=" btn btn-danger  btn-block" onclick="muestraPanel('<%= numero %>')"><%= elemento %></button>
											<% elsif actual - actividad.fechaTermino <= 30 && actual - actividad.fechaTermino >=15 %>
											   <button class="btn btn-warning btn-block" onclick="muestraPanel('<%= numero %>')"><%= elemento%></button>
											<% else %>				
												<button class="btn btn-success btn-block" onclick="muestraPanel('<%= numero %>')"><%= elemento %></button>
											<% end %>
											<% bandera = true %>
										<% elsif contador == 1 %>
											<div class="panel" id="<%= numero %>">
												<strong>Para el docente <%= elemento %> :</strong><br>
												<% contador = 2 %>
										<% else %>
											<p>- Falta la evidencia: <%= elemento %><br></p>
										<% end %>
									<% end %>									
									<% @arreglo = [] 
									   contador = 1 							   
									%>
											 </div>	
								</div>	
							</div>						
						<% end %>	
					<% end %>
				<% elsif  actividad.tipoEvidencia == "Equipo" %>
					<% @arreglo = [] %>
					<% texto = actividad.cat_tipo_actividad.nombreTipoAct%> 
					<% texto = texto +" "+ actividad.nombreActividad %>
					<% @arreglo.push(texto) %>
					<% @evi.each do |evi| %>
						<% if ActividadEvidencia.find_by(actividad_id: actividad.id, cat_evidencia_id: evi) == nil %>
							<% @arreglo.push(CatEvidencia.find(evi).nombreEvidencia) %>
						<% end %>
					<% end %>
					<% if @arreglo.size() > 1 %>											
							<div class="row">
								<div class="col-md-6">	
									<% @arreglo.each do |elemento| %>
										<% if bandera == false %>
											<% if actual - actividad.fechaTermino > 30 %>
												<button class="btn btn-danger btn-block" onclick="muestraPanel('<%= numero %>')"><%= elemento %></button>
											<% elsif actual - actividad.fechaTermino <= 30 && actual - actividad.fechaTermino >=15 %>
											<button class="btn btn-warning btn-block" onclick="muestraPanel('<%= numero %>')"><%= elemento%></button>
											<% else %>				
											  <button class="btn btn-success btn-block" onclick="muestraPanel('<%= numero %>')"><%= elemento %></button>
											<% end %>
											<% bandera = true %>						
										<% else %>
											<div class="panel" id="<%= numero %>">
												- Falta la evidencia: <%= elemento %><br>
											</div>	
										<% end %>
																				
									<% end %>								
								<% @arreglo = []%>
								</div>
							</div>										
					<% end %>
					<% else %>
						<%# actividad.nombreActividad%> 
					<% end %>				
				<% end %>
				<% bandera = false %>
				<% numero = numero + 1 %>
			<% end %>	
</div>
	</div>
</div>